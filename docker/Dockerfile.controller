FROM alpine:latest

RUN apk add --no-cache ca-certificates tzdata

COPY edgelink-controller /usr/local/bin/edgelink-controller

RUN chmod +x /usr/local/bin/edgelink-controller

# Create default config directory
RUN mkdir -p /etc/edgelink /var/lib/edgelink

# WebSocket server port
EXPOSE 8443

VOLUME ["/etc/edgelink", "/var/lib/edgelink"]

ENTRYPOINT ["/usr/local/bin/edgelink-controller"]
CMD ["-c", "/etc/edgelink/controller.toml"]
